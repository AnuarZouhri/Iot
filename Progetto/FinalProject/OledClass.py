from machine import Pin, I2C
import ssd1306
import framebuf
import network
import time
import utime
from time import sleep

logo_lock = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xb0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1dx\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00?T\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00X\x16\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00p\x0c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa0\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xff\x7f\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf5\xfe\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xff\xfe\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xff\x7f\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfc?\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfc;\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfc;\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xb47\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfe|\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfe~\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xa6^\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfa~\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xfe\x7f\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xf4_\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\xdf@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xfe\xb7\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xed\x7f`\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\xb0\x00\x00\x7f\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0000\x00\x00`\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x10\x00\x00``\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0003\x00``` \x00\x00\x00\x00\x00\x00\x00\x00\x000?\xc1\xf8`a\xfca\x80\x00\x00\x00\x00\x00\x00\x000\x18c\x0c`\xc3\x8c3\x00\x00\x00\x00\x00\x00\x00\x0000f\x0c\x7f\x83\x06;\x00\x00\x00\x00\x00\x00\x00\x000\x10f\x04a\xe2\x06\x1e\x00\x00\x00\x00\x00\x00\x00\x0000g\xfe`b\x06\x0c\x00\x00\x00\x00\x00\x00\x00\x0000f\x00`2\x06\x0e\x00\x00\x00\x00\x00\x00\x00\x000\x10f\x00`2\x06\x1e\x00\x00\x00\x00\x00\x00\x00\x0000f\x04`c\x063\x00\x00\x00\x00\x00\x00\x00\x0000c\x0c`\xe3\x8cq\x80\x00\x00\x00\x00\x00\x00\x000\x10a\xf8\x7f\xc1\xfca\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')

logo_unlock = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07`\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00>h\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00p\x0e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xf0\x0e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\xfd`\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xff\xff\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xaa\x7f\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xeew\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf8?\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf8?`\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfc?\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x8c?\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07~[\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xbe\x7f\xa0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfe\x7f\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07^w\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\xee\x7f\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xfc\xf7`\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xdf\xf7\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xb7\xbf\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xfe`\x00\x00\x7f\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0`\x00\x00`\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0`\x00\x00`0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0f\x00``0\x18\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0\x7f\x83\xf8`0\x7f\x1cp\x00\x00\x00\x00\x00\x00\x00\xc0q\xc7\x1c``\xc3\x0c`\x00\x00\x00\x00\x00\x00\x00\xc0`\xc6\x0c\x7f\xc1\x81\x86\xc0\x00\x00\x00\x00\x00\x00\x00\xc0`\xcc\x04`\xf1\x81\x87\x80\x00\x00\x00\x00\x00\x00\x00\xc0`\xcf\xfe`9\x81\x83\x80\x00\x00\x00\x00\x00\x00\x00\xc0`\xcc\x00`\x19\x81\x83\x80\x00\x00\x00\x00\x00\x00\x00\xc0`\xcc\x00`\x19\x81\x86\xc0\x00\x00\x00\x00\x00\x00\x00\xc0`\xc6\x0c`9\x81\x8e`\x00\x00\x00\x00\x00\x00\x00\xc0`\xc7\x1c\x7f\xf0\xc3\x1c`\x00\x00\x00\x00\x00\x00\x00\xc0`\xc3\xf8\x7f\xe0~\x180\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')

loading=bytearray(b'')
class Oled:
    
    def __init__(self):
        self.WIDTH = 128
        self.HEIGHT = 64
        self.SCL_PIN = 22
        self.SDA_PIN = 21
        self.i2c = I2C(0, scl=Pin(self.SCL_PIN), sda=Pin(self.SDA_PIN))
        self.display = ssd1306.SSD1306_I2C(self.WIDTH, self.HEIGHT, self.i2c)
        
        
    def write(self,x,y,color_background,text,separator='\n',clean = True):
        if clean == True:
            self.display.fill_rect(0,0,128,64,color_background)
        i=0
        for char in text:
            
            if not char == separator:
                self.display.text(char,x+i*8,y,not color_background)
            i = i+1
            if x+i*8 >= 128 or char == separator:
                y = y+10
                i=0
            
        #self.display.show()
        return [x+i*8,y]
    
    def show(self):
        self.display.show()
    
    
    def writeLogo(self):
        fb = framebuf.FrameBuffer(logo_lock, 128, 64, framebuf.MONO_HLSB)
        self.display.fill(0)
        self.display.blit(fb, 8, 0)
        
    def writeLogoUnlock(self):
        fb = framebuf.FrameBuffer(logo_unlock, 128, 64, framebuf.MONO_HLSB)
        self.display.fill(0)
        self.display.blit(fb, 8, 0)
        
    def writeLoading(self):
        fb = framebuf.FrameBuffer(loading, 128, 64, framebuf.MONO_HLSB)
        self.display.fill(0)
        self.display.blit(fb, 8, 0)
        


        

         
        
        
    